---
layout: post
title:  "JAVA多线程系列-锁与信号量的2+2"
date:    2016-06-03 13:40
categories: Java
comment: true
---

## 2种锁与&2信号量

### 2种锁

#### 2 synchronized关键字和lock
1：synchronized是Java关键字，而Lock是锁对象。
2：synchronized可以使用任意对象、类进行互斥访问控制；Lock只能使用锁对象本身（基于AbstractQueuedSynchronizer接口（AQS））
3：lock相对synchronized来说更灵活，伸缩性更强，有利于提高并发性。
4：但是推荐使用synchronized，理由是更安全，更通用，更方便！


### 2种信号量

Java信号量 
final Semaphore semp = new Semaphore(5);//容量为5的信号量
semp.acquire();//
System.out.println("Accessing: " + NO);
Thread.sleep((long) (Math.random() * 10000));
// 访问完后，释放
semp.release();


### 锁机制代码

```java

public static void main(String[] args)
{
	Share share=new Share();
	for(int i = 0;i<10;i++)
	{
	Thread t1=new Thread(new MyRunnable(share),"t1");
	t1.start();
	}
}	
public static class Share
{
	private int num=100;
	public int getnum()
	{
		return num;
	}	
	public synchronized void decnum()
	{
		int num2=num;
		num2-=10;
		try {
			Thread.sleep(1);// do something
		} catch (InterruptedException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		num=num2;
	}
}

public static class MyRunnable implements Runnable
{
	Share share;
	
	public MyRunnable(Share share) {
		this.share=share;
	}
	@Override
	public void run() {
		share.decnum();
		System.out.println(share.getnum());
	}
}

```